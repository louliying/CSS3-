<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>七夕</title>
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/walk.css" />
	<link rel="stylesheet" href="css/sun.css" />
	<link rel="stylesheet" type="text/css" href="css/cloud.css" />
	<link rel="stylesheet" href="css/page1.css" />
	<link rel="stylesheet" href="css/page2.css" />
	<link rel="stylesheet" href="css/page3.css" />
</head>
<body>
	<div id="content">
		<ul class="content_wrap">
			<li>
				<!-- 背景图 -->
                <div class="a_background">
                    <div class="a_background_top"></div>
                    <div class="a_background_middle"></div>
                    <div class="a_background_botton"></div>
                </div>
                <!-- 云 -->
                <div class="cloudArea">
                    <div class="cloud cloud1"></div>
                    <div class="cloud cloud2"></div>
                </div>
                <!-- 太阳 -->
                <div id="sun"></div>
			</li>
			<li>
				<!-- 背景图 -->
                <div class="b_background"></div>
                <div class="b_background_preload"></div>
                <!-- 商店 -->
                <div class="shop">
                    <div class="door">
                        <div class="door-left"></div>
                        <div class="door-right"></div>
                    </div>
                    <!-- 灯 -->
                    <div class="lamp"></div>
                </div>
                <!-- 鸟 -->
                <div class="bird"></div>		
			</li>
			<li>
				<!-- 背景图 -->
                <div class="c_background">
                    <div class="c_background_top"></div>
                    <div class="c_background_middle"></div>
                    <div class="c_background_botton"></div>                
                </div>
                <!-- 小女孩 -->
                <div class="girl"></div>
                <div class="bridge-bottom">
                    <div class="water">
                        <div id="water1" class="water_1"></div>
                        <div id="water2" class="water_2"></div>
                        <div id="water3" class="water_3"></div>
                        <div id="water4" class="water_4"></div>
                    </div>
                </div>
                <!-- 星星 -->
                <ul class="stars">
                    <li class="stars1"></li>
                    <li class="stars2"></li>
                    <li class="stars3"></li>
                    <li class="stars4"></li>
                    <li class="stars5"></li>
                    <li class="stars6"></li>
                </ul>
                <!-- 慕课网logo图 -->
                <div class="logo">七夕快乐</div>			
			</li>
		</ul>

		<!-- 雪花 -->
        <div id="snowflake"></div>

		<!-- 小男孩 -->
        <div id="boy" class="charector"></div>
		

	</div>
	<!--<div class="button">
        <button>开始</button>
    </div>-->
	<script type="text/javascript" src="js/jquery-2.1.1.js"></script>
	<script type="text/javascript" src="js/jquery.transit.js"></script>
	<!--<script type="text/javascript" src="js/Swip.js"></script>-->
	<script type="text/javascript" src="js/qixi.js"></script>
	<!--<script type="text/javascript" src="js/boyWalk.js"></script>-->
	<!--<script type="text/javascript">
		/*var swipe = Swipe( $("#content") );

		var getValue = function (className) {
			// body...
			var $elem = $('' + className + "");
			return {
				height:$elem.height(),
				top:$elem.position().top
			};
		};

		var pathY = function(){
			var data = getValue(".a_background_middle");
			return data.top + data.height/2;
		}();

		var $boy = $("#boy");
		var boyHeight = $boy.height();
		$boy.css({
			top: pathY - boyHeight + 25 +　"px"			
		});*/


        /*// 开始
	    $("button:first").click(function() {
	    	//$boy.addClass("slowWalk");
	        $boy.addClass('slowWalk').transition({
	            'left': $("#content").width() + 'px',
	        }, 10000);
	    });

	    // 暂停
	    $("button:last").click(function() {
	        var left = $boy.css('left');
	        // 强制做了一个改变目标left的处理
	        // 动画是要运行10秒,所以此时动画还是没有结束的
	        $boy.css('left',left);
	        // 增加暂停的样式
	        // ?
	        $boy.addClass("pauseWalk");
	    });*/
		
		/*// 开始
	    $("button:first").click(function() {
	        // 10秒钟 ，走到0.5 也就是页面中间位置
	        var distX = calculateDist('x', 0.5);
	        var distY = calculateDist('y', 0.5);
	        walkRun(10000, distX, distY);
	    });*/

	</script>-->

	<!--<script type="text/javascript">
	    $(function() {
	    
	        var container = $("#content");
	        var swipe = Swipe(container);
	        // 页面滚动到指定的位置
	        function scrollTo(time, proportionX) {
	            var distX = container.width() * proportionX;
	            swipe.scrollTo(distX, time);
	        }
	    
	        ////////////////////////////////////////////////////////
	        //=================== 动画处理 =======================//
	        ////////////////////////////////////////////////////////
	    	
	    	//////////
		    // 小孩走路 //
		    //////////
	        var boy = BoyWalk();
	    
	        // 开始
	        $("button:first").click(function() {
	    		// 太阳公转
            	$("#sun").addClass('rotation');
            	// 飘云
		        $(".cloud:first").addClass('cloud1Anim');
		        $(".cloud:last").addClass('cloud2Anim');
	    	
	            // 开始第一次走路
	            boy.walkTo(2000, 0.2)
	                .then(function() {
	                    // 第一次走路完成
	                    // 开始页面滚动
	                    //?
	                    scrollTo(5000, 1);
	                }).then(function() {
	                    // 第二次走路
	                    return boy.walkTo(5000, 0.5);
	                });
	        });

	        ////////////////////////////////////////////////////////
	        //=================== 动画处理 =======================//
	        ////////////////////////////////////////////////////////
	        // 用来临时调整页面
		    swipe.scrollTo(container.width(), 0);

		    BoyWalk();

		    function doorAction(left, right, time) {
		        var $door = $('.door');
		        var doorLeft = $('.door-left');
		        var doorRight = $('.door-right');
		        var defer = $.Deferred();
		        var count = 2;
		        // 等待开门完成
		        var complete = function() {
		            if (count == 1) {
		                defer.resolve();
		                return;
		            }
		            count--;
		        };
		        doorLeft.transition({
		            'left': left
		        }, time, complete);
		        
		        //?
		        
		         return defer;
		    }

		    // 开门
		    function openDoor() {
		        return doorAction('-50%', '100%', 2000);
		    }

		    // 关门
		    function shutDoor() {
		        return doorAction('0%', '50%', 2000);
		    }


		    // 开门
		    $("button:first").click(function() {
		        openDoor();
		    });

		    // 关门
		    $("button:last").click(function() {
		        shutDoor();
		    });

	    
	    });
	</script>-->

	<!--<script type="text/javascript">
		$(function() {
		    var container = $("#content");
		    var swipe = Swipe(container);
		    // 页面滚动到指定的位置
		    function scrollTo(time, proportionX) {
		        var distX = container.width() * proportionX;
		        swipe.scrollTo(distX, time);
		    }

		    ////////////////////////////////////////////////////////
		    // ================= 动画处理 ======================= //
		    ////////////////////////////////////////////////////////

		    // 用来临时调整页面
		    swipe.scrollTo(container.width(), 0);

		    var boy = BoyWalk()

		    /////////
		    //右边飞鸟 //
		    /////////
		    var bird = {
		        elem: $(".bird"),
		        fly: function() {
		            this.elem.addClass('birdFly')
		            this.elem.transition({
		                right: container.width()
		            }, 15000, 'linear');
		        }
		    };


		    function startRun() {

		        boy.walkTo(2000, 0.5)
		            .then(function() {
		                //暂停走路
		                boy.stopWalk()
		            })
		            .then(function() {
		                // 开门
		                return openDoor();
		            })
		            .then(function() {
		                // 开灯
		                lamp.bright();
		            })
		            .then(function() {
		                // 进商店
		                return boy.toShop(2000);
		            }).then(function(){
		                // 取花
		                return boy.talkFlower();
		            }).then(function() {
		                // 飞鸟
		                bird.fly();
		            }).then(function() {
		                // 出商店
		                return boy.outShop(2000);
		            }).then(function(){
		                // 关门
		                return shutDoor();
		            }).then(function() {
		                // 灯暗
		                lamp.dark();
		            });
		    }


		    // 开始
		    $("button:first").click(startRun);

		})
	</script>-->
	<!--<script type="text/javascript">
		$(function() {

		    var container = $("#content");
		    var swipe = Swipe(container);
		    var visualWidth = container.width();
		    // 页面滚动到指定的位置
		    function scrollTo(time, proportionX) {
		        var distX = visualWidth * proportionX;
		        swipe.scrollTo(distX, time);
		    }

		    // 获取数据
		    var getValue = function(className) {
		        var $elem = $('' + className + '')
		        // 走路的路线坐标
		        return {
		            height: $elem.height(),
		            top: $elem.position().top
		        };
		    };

		    // 桥的Y轴
		    var bridgeY = function() {
		        var data = getValue('.c_background_middle');
		        return data.top;
		    }();

		    ////////////////////////////////////////////////////////
		    // ================= 动画处理 ======================= //
		    ////////////////////////////////////////////////////////

		    // 用来临时调整页面
		    swipe.scrollTo(visualWidth * 2, 0);

		    

		    ////////
		    //小女孩 //
		    ////////
		    var girl = {
		        elem: $('.girl'),
		        getHeight: function() {
		            return this.elem.height();
		        },
		        // 转身动作
		        rotate: function() {
		            this.elem.addClass('girl-rotate');
		        },
		        setPosition: function() {
		            this.elem.css({
		                left: visualWidth / 2,
		                top: bridgeY - this.getHeight()
		            });
		        },
		        getPosition: function() {
		            return this.elem.position();
		        },
		        getWidth: function() {
		            return this.elem.width()
		        }
		    };
		    // 修正小女孩位置
    		girl.setPosition();

		    ///////////
		    //loge动画 //
		    ///////////
		    var logo = {
		        elem: $('.logo'),
		        run: function() {
		            this.elem.addClass('logolightSpeedIn')
		                .on(animationEnd, function() {
		                    $(this).addClass('logoshake').off();
		                });
		        }
		    };

		    //////////
		    // 小孩走路 //
		    //////////
		    var boy = BoyWalk();
		    boy.talkFlower();

		    var snowflakeURl = [
		        'images/snowflake/snowflake1.png',
		        'images/snowflake/snowflake2.png',
		        'images/snowflake/snowflake3.png',
		        'images/snowflake/snowflake4.png',
		        'images/snowflake/snowflake5.png',
		        'images/snowflake/snowflake6.png'
		    ]

		    ///////
		    //飘雪花 //
		    ///////
		    function snowflake() {
		        // 雪花容器
		        var $flakeContainer = $('#snowflake');

		        // 随机六张图
		        function getImagesName() {
		            return snowflakeURl[[Math.floor(Math.random() * 6)]];
		        }
		        // 创建一个雪花元素
		        function createSnowBox() {
		            var url = getImagesName();
		            return $('<div class="snowbox" />').css({
		                'width': 41,
		                'height': 41,
		                'position': 'absolute',
		                'backgroundSize': 'cover',
		                'zIndex': 100000,
		                'top': '-41px',
		                'backgroundImage': 'url(' + url + ')'
		            }).addClass('snowRoll');
		        }
		        // 开始飘花
		        setInterval(function() {
		            // 运动的轨迹
		            var startPositionLeft = Math.random() * visualWidth - 100,
		                startOpacity    = 1,
		                endPositionTop  = visualHeight - 40,
		                endPositionLeft = startPositionLeft - 100 + Math.random() * 500,
		                duration        = visualHeight * 10 + Math.random() * 5000;

		            // 随机透明度，不小于0.5
		            var randomStart = Math.random();
		            randomStart = randomStart < 0.5 ? startOpacity : randomStart;

		            // 创建一个雪花
		            var $flake = createSnowBox();

		            // 设计起点位置
		            $flake.css({
		                left: startPositionLeft,
		                opacity : randomStart
		            });

		            // 加入到容器
		            $flakeContainer.append($flake);

		            // 开始执行动画
		            $flake.transition({
		                top: endPositionTop,
		                left: endPositionLeft,
		                opacity: 0.7
		            }, duration, 'ease-out', function() {
		                $(this).remove() //结束后删除
		            });
		            
		        }, 200);
		    }


		    // 音乐配置
		    var audioConfig = {
		        enable: true, // 是否开启音乐
		        playURl: 'http://www.imooc.com/upload/media/happy.wav', // 正常播放地址
		        cycleURL: 'http://www.imooc.com/upload/media/circulation.wav' // 正常循环播放地址
		    };

		    /////////
		    //背景音乐 //
		    /////////
		    function Hmlt5Audio(url, isloop) {
		        var audio = new Audio(url);
		        audio.autoPlay = true;
		        audio.loop = isloop || false;
		        audio.play();
		        return {
		            end: function(callback) {
		                audio.addEventListener('ended', function() {
		                    callback();
		                }, false);
		            }
		        };
		    }


		    // 开始
		    $("button:first").click(function() {

		        // 第一次走路到桥底边left,top
		        boy.walkTo(2000, 0.15)
		            .then(function() {
		                // 第二次走路到桥上left,top
		                return boy.walkTo(1500, 0.25, girl.getPosition().top / visualHeight);
		            })
		            .then(function() {
		                // 实际走路的比例
		                var proportionX = (girl.getPosition().left - boy.getWidth() + girl.getWidth() / 5) / visualWidth;
		                // 第三次桥上直走到小女孩面前
		                return boy.walkTo(1500, proportionX);
		            }).then(function() {
		                // 图片还原原地停止状态
		                boy.resetOriginal();
		            }).then(function() {
		                // 增加转身动作 
		                setTimeout(function() {
		                    girl.rotate();
		                    boy.rotate(function() {
		                        // 开始logo动画
		                        logo.run();
		                        //飘花瓣
		                        snowflake();
		                        //播放音乐 
		                        var audio1 = Hmlt5Audio(audioConfig.playURl);
						        audio1.end(function() {
						            // ?
						            Hmlt5Audio(audioConfig.cycleURL, true);
						        });
		                    });
		                }, 1000);
		            });
		    })




		})
	</script>-->
</body>
</html>